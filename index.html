<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Extreme Park Application</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* Custom colors redefined using Bootstrap's text utilities */
        .text-accepted {
            color: var(--bs-success) !important; 
            font-weight: bold;
        }

        .text-rejected {
            color: var(--bs-danger) !important; 
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        
        <div id="formSection" class="card shadow-lg p-4 mx-auto" style="max-width: 550px;">
            <h1 class="card-title text-center mb-4 text-primary">Extreme Park Application Form</h1>
            <form id="applicationForm">
                
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name:</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter your full name">
                </div>

                <div class="mb-3">
                    <label for="age" class="form-label">Age (18-45):</label>
                    <input type="number" class="form-control" id="age" name="age" placeholder="Enter your age (18-45)">
                </div>

                <div class="mb-3">
                    <label for="weight" class="form-label">Weight (kg):</label>
                    <input type="number" class="form-control" id="weight" name="weight" step="0.1" placeholder="Enter your weight in kg">
                </div>

                <div class="mb-3">
                    <label for="height" class="form-label">Height (cm):</label>
                    <input type="number" class="form-control" id="height" name="height" step="0.1" placeholder="Enter your height in cm">
                </div>

                <div class="mb-4">
                    <label for="chronic" class="form-label">Do you have a chronic disease?</label>
                    <select id="chronic" name="chronic" class="form-select">
                        <option value="" selected disabled>--Select--</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary w-100">Submit Application</button>
            </form>
        </div>

        <div id="resultSection" class="card shadow-lg p-4 mx-auto mt-4" style="max-width: 550px; display: none;">
            <h2 class="card-title text-center mb-3">Application Summary</h2>
            <p id="summaryText" class="lead text-center"></p>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $('#applicationForm').submit(function (event) {
                event.preventDefault();

                const name = $('#name').val().trim();
                const age = parseInt($('#age').val());
                const weight = parseFloat($('#weight').val());
                const height = parseFloat($('#height').val());
                const chronic = $('#chronic').val();

                let errors = [];

                // Check for empty fields
                if (!name) errors.push("Please enter your full name.");
                if (!age) errors.push("Please enter your age.");
                if (!weight) errors.push("Please enter your weight.");
                if (!height) errors.push("Please enter your height.");
                if (!chronic) errors.push("Please select your chronic disease status.");

                // Show popups for each missing field
                if (errors.length > 0) {
                    errors.forEach(err => alert(err));
                    return;
                }

                // Calculate BMI
                const bmi = weight / Math.pow(height / 100, 2);

                // Check eligibility
                if (age < 18 || age > 45 || bmi < 18 || bmi > 25 || chronic === "yes") {
                    let reason = "";
                    if (age < 18 || age > 45) reason += "Your age is not within the condition of 18-45.\n";
                    if (bmi < 18 || bmi > 25) reason += `Your height and weight don't meet the BMI condition within the range of 18-25. (Your BMI: ${bmi.toFixed(2)})\n`;
                    if (chronic === "yes") reason += "Chronic disease disqualifies the application due to safety reasons.\n";

                    // Use the custom classes defined in the <style> block
                    $('#summaryText').removeClass('text-accepted').addClass('text-rejected').html("<strong>Application Rejected. You can try again later!</strong><br>" + reason.replace(/\n/g, "<br>"));
                } else {
                    const confirmApply = confirm("All details are valid. Do you want to submit the application?");
                    if (!confirmApply) {
                        alert("Application not submitted.");
                        return;
                    }

                    // Show success summary and apply green color
                    const summary = `
                        <strong>Application Approved! Welcome to the Adventure Camp.</strong><br>
                        Name: ${name}<br>
                        Age: ${age}<br>
                        Weight: ${weight} kg<br>
                        Height: ${height} cm<br>
                        Chronic Disease: ${chronic === "no" ? "No" : "Yes"}
                    `;
                    // Use the custom classes defined in the <style> block
                    $('#summaryText').removeClass('text-rejected').addClass('text-accepted').html(summary);
                }

                // Hide form and show result
                $('#formSection').hide();
                $('#resultSection').show();
            });
        });
    </script>
</body>
</html>